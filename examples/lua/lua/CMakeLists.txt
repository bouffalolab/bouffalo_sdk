sdk_generate_library()

sdk_add_include_directories(core/inc)
sdk_add_include_directories(port/inc)

sdk_library_add_sources(core/src/lapi.c)
sdk_library_add_sources(core/src/lauxlib.c)
sdk_library_add_sources(core/src/lbaselib.c)
sdk_library_add_sources(core/src/lcode.c)
sdk_library_add_sources(core/src/lcorolib.c)
sdk_library_add_sources(core/src/lctype.c)
sdk_library_add_sources(core/src/ldebug.c)
sdk_library_add_sources(core/src/ldblib.c)
sdk_library_add_sources(core/src/ldo.c)
sdk_library_add_sources(core/src/ldump.c)
sdk_library_add_sources(core/src/lfunc.c)
sdk_library_add_sources(core/src/lgc.c)
sdk_library_add_sources(core/src/linit.c)
sdk_library_add_sources(core/src/liolib.c)
sdk_library_add_sources(core/src/llex.c)
sdk_library_add_sources(core/src/lmathlib.c)
sdk_library_add_sources(core/src/lmem.c)
sdk_library_add_sources(core/src/loadlib.c)
sdk_library_add_sources(core/src/lobject.c)
sdk_library_add_sources(core/src/lopcodes.c)
sdk_library_add_sources(core/src/loslib.c)
sdk_library_add_sources(core/src/lparser.c)
sdk_library_add_sources(core/src/lstate.c)
sdk_library_add_sources(core/src/lstring.c)
sdk_library_add_sources(core/src/lstrlib.c)
sdk_library_add_sources(core/src/ltable.c)
sdk_library_add_sources(core/src/ltablib.c)
sdk_library_add_sources(core/src/ltm.c)
sdk_library_add_sources(core/src/lundump.c)
sdk_library_add_sources(core/src/lutf8lib.c)
sdk_library_add_sources(core/src/lvm.c)
sdk_library_add_sources(core/src/lzio.c)

sdk_library_add_sources(start/lua.c)

if(CONFIG_LUA_LHAL)
sdk_library_add_sources(lhal/llib_init.c)
sdk_library_add_sources(lhal/llib_core.c)
sdk_library_add_sources(lhal/llib_mtimer.c)
sdk_library_add_sources(lhal/llib_gpio.c)
sdk_add_include_directories(lhal)
sdk_add_compile_definitions(-DCONFIG_LUA_LHAL)
endif()

sdk_add_compile_definitions(-DCONFIG_LUA)