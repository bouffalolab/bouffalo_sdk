sdk_generate_library()

if (CONFIG_OTBR)
  sdk_add_compile_definitions(OPENTHREAD_BORDER_ROUTER)
endif()

sdk_library_add_sources(src/apps/lwiperf/lwiperf.c)
sdk_library_add_sources(src/apps/http/fs.c)
sdk_library_add_sources(src/apps/http/http_client.c)
# sdk_library_add_sources(src/apps/http/fsdata_custom.c)
# sdk_library_add_sources(src/apps/http/fsdata.c)
# sdk_library_add_sources(src/apps/http/httpd.c)
sdk_library_add_sources_ifdef(CONFIG_DHCPD src/apps/dhcpd/dhcp_server_raw.c)
sdk_library_add_sources_ifdef(CONFIG_MDNS src/apps/mdns/mdns_server.c)
sdk_add_include_directories_ifdef(CONFIG_DHCPD src/apps/dhcpd)
sdk_add_include_directories_ifdef(CONFIG_MDNS src/apps/mdns)

sdk_library_add_sources_ifdef(CONFIG_LWIP_ALTCP src/apps/altcp_tls/altcp_tls_mbedtls.c)
sdk_library_add_sources_ifdef(CONFIG_LWIP_ALTCP src/apps/altcp_tls/altcp_tls_mbedtls_mem.c)

sdk_library_add_sources_ifdef(CONFIG_LWIP_ALTCP src/core/altcp.c)
sdk_library_add_sources_ifdef(CONFIG_LWIP_ALTCP src/core/altcp_alloc.c)
sdk_library_add_sources_ifdef(CONFIG_LWIP_ALTCP src/core/altcp_tcp.c)

sdk_library_add_sources(src/api/api_lib.c)
sdk_library_add_sources(src/api/api_msg.c)
sdk_library_add_sources(src/api/err.c)
sdk_library_add_sources(src/api/netbuf.c)
sdk_library_add_sources(src/api/netdb.c)
sdk_library_add_sources(src/api/netifapi.c)
sdk_library_add_sources(src/api/sockets.c)
sdk_library_add_sources(src/api/tcpip.c)

sdk_library_add_sources(src/core/ipv4/autoip.c)
sdk_library_add_sources(src/core/ipv4/dhcp.c)
sdk_library_add_sources(src/core/ipv4/etharp.c)
sdk_library_add_sources(src/core/ipv4/icmp.c)
sdk_library_add_sources(src/core/ipv4/igmp.c)
sdk_library_add_sources(src/core/ipv4/ip4_addr.c)
sdk_library_add_sources(src/core/ipv4/ip4_frag.c)
sdk_library_add_sources(src/core/ipv4/ip4.c)
sdk_library_add_sources(src/core/ipv4/ip4_napt.c)

sdk_library_add_sources(src/core/ipv6/dhcp6.c)
sdk_library_add_sources(src/core/ipv6/ethip6.c)
sdk_library_add_sources(src/core/ipv6/icmp6.c)
sdk_library_add_sources(src/core/ipv6/inet6.c)
sdk_library_add_sources(src/core/ipv6/ip6.c)
sdk_library_add_sources(src/core/ipv6/ip6_addr.c)
sdk_library_add_sources(src/core/ipv6/ip6_frag.c)
if (NOT DEFINED CONFIG_OTBR OR NOT CONFIG_OTBR)
  sdk_library_add_sources(src/core/ipv6/mld6.c)
endif()
sdk_library_add_sources(src/core/ipv6/nd6.c)

sdk_library_add_sources(src/core/def.c)
sdk_library_add_sources(src/core/dns.c)
sdk_library_add_sources(src/core/inet_chksum.c)
sdk_library_add_sources(src/core/init.c)
sdk_library_add_sources(src/core/ip.c)
sdk_library_add_sources(src/core/mem.c)
sdk_library_add_sources(src/core/memp.c)
sdk_library_add_sources(src/core/netif.c)
sdk_library_add_sources(src/core/pbuf.c)
sdk_library_add_sources(src/core/raw.c)
sdk_library_add_sources(src/core/stats.c)
sdk_library_add_sources(src/core/sys.c)
sdk_library_add_sources(src/core/tcp_in.c)
sdk_library_add_sources(src/core/tcp_out.c)
sdk_library_add_sources(src/core/tcp.c)
sdk_library_add_sources(src/core/timeouts.c)
sdk_library_add_sources(src/core/udp.c)

sdk_library_add_sources(src/netif/ethernet.c)
sdk_library_add_sources(src/netif/bridgeif.c)
sdk_library_add_sources(src/netif/bridgeif_fdb.c)
sdk_library_add_sources(lwip-port/FreeRTOS/sys_arch.c)

sdk_add_include_directories(lwip-port)
sdk_add_include_directories(src/include)
sdk_add_include_directories(src/include/compat/posix)
